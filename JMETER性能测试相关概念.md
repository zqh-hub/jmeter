##### JMETER性能测试相关概念

###### 性能测试流程

![a-01](D:\student\doc\Jmeter\img\a-01.png)

###### 性能测试相关术语

负载

```shell
模拟业务操作对服务器造成压力的过程，比如模拟100个用户进行发帖
```

性能测试（Performance Testing）

```
模拟用户负载来测试系统在负载情况下，系统的响应时间、吞吐量等指标是否满足性能要求
```

负载测试（Load Testing）

```shell
在一定软硬件环境下，通过不断加大负载(虚拟用户)来确定在满足性能指标情况下能够承受的最大用户数。简单来说，可以帮助我们对系统进行定容定量，找出系统性能拐点，给予生产环境规划建议
```

压力/强度测试

```
在一定软硬件环境下，通过高负载的手段来使服务器资源(强调服务器资源，硬件资源)处于极限状态，测试系统在极限状态下长时间运行是否稳定，确定是否稳定的指示包括TPS、RT、CPU Using、Mem Using等
```

稳定性测试

```
在一定软硬件环境下，长时间运行一定负载，确 定系统在满足性能指标的前提下是否运行稳定
它的前提是满足性能要求的负载情况下进行测试
```

TPS

```
每秒完成的事务数，通常指每秒成功的事务数，性能测试中重要的综合性性能指标
```

RT/ART (Response Time/average Response Time)

```
响应时间/平均响应时间，指一个事务花费多长时间完成(多长时间响应客户请求)，为了使这个响应时间更具代表性，会统计更多的响应时间然后取平均值，即得到了事务平均响应时间(ART),为了方便大家通常会直接用RT来代替ART, ART与 RT是代表同一个意思。
```

PV (Page View)

```
每秒用户访问页面的次数，此参数用来分析平均每秒有多少用户访问页面
```

Vuser虚拟用户(Virtual user）

```
模拟真实业务逻辑步骤的虚拟用户，虚拟用户模拟 的操作步骤都被记录在虚拟用户脚本里
```

Concurrency并发

```shell
# 狭义的并发
即所有的用户在同一 时刻做同一件事情或操作，这种操作一般针对同一类型的业务，或者所有用户进行完全一样的操作，目的是测试数据库和程序对并发操作的处理

# 广义的并发
即多个用户对系统发出了请求或者进行了操作，但是这些请求或操作可以是不同的。对整个系统而言，仍然有很多用户同时进行操作

# 各自适用的场景
狭义并发强调对系统的请求操作是完全相同的，多适用于性能测试、负载测试、压力测试、稳定性测试场景；广义并发不限制对系统的请求操作，多适用于混合场景、稳定性测试场景
```

标准差

```
该标准差根据数理统计的概念得来，标准差越小，说明 波动越小，系统越稳定，反之，标准差越大，说明波动越大，系统越不稳定。包括响应时间标准差、TPS标准差、Running Vuser标准差、Load标准差、CPU资源利用率标准差、Web Resources标准差等
```

###### 性能测试通过标准

| 判断维度      | 不通过                 | 通过                   |
| ------------- | ---------------------- | ---------------------- |
| 超时概率      | 大于0.05%              | 小于0.05%              |
| 错误概率      | 大于0.05%              | 小于0.05%              |
| TPS           | 小于期望峰值           | 大于期望峰值           |
| CPU利用率     | 大于75%                | 小于75%                |
| 响应时间      | 大于期望时间           | 小于期望时间           |
| Load          | 平均每秒CPU的Load大于1 | 平均每秒CPU的Load小于1 |
| JVM内存使用率 | 大于80%                | 小于80%                |

```shell
# 网页响应时间一般根据(1s-优秀,3s-普通,5s-忍受极限)来判断。假设5s为客户忍受的上限，特殊功能另议
```

###### JMeter运行原理

```
JMeter通过线程组来驱动多个线程运行测试脚本，对被测试服务器发起负载
```

![a-02](D:\student\doc\Jmeter\img\a-02.png)

###### JMeter于LoadRunner异同

```
(1) 无容质疑，LoadRunner还是性能测试领域的王者，标准制定者；JMeter是后起之秀。

(2) LoadRunner主要由C语言开发，支持Java、VB、C#； JMeter是纯Java开发，支持多种Java脚本语言。

(3) LoadRunner费用高昂，JMeter完全免费；LoadRunner学习成本更低，主要是强大的录制功能让大家钟爱；省事、效率高、门槛低；用的人多经验分享多，所以相对更容易上手。JMeter相对来说学习资料会少一些，而且也没有LoadRunner强大的录制功能，但开源的力量已经在发力，第三方工具与插件已经让JMeter变得强大。现在尤其是大型的互联网企 业都在运用JMeter来进行性能测试，这已经说明问题了。

(4) LoadRunner支持市面上几乎所有见到的应用的性能测试，不管你是C、Java、VB、JavaScript、C#开发的程序，还是数据库(OracleMySQL、SQLServer)应用；本地程序也好，远程调用也好；C/S模式还是B/S模式甚至移动终端都可以不负使命来完成。JMeter虽然没有其强大的兼容性，但也能够完成上面的所有工作，只不过有些需要自己来扩展这些功能，如果能够简单编程，这些都不是问题。所以大家不要把扩展想象得太难，解决问题应该是你的追求，这正是技术价值的体现，也是作为一个性能测试工程师的核心价值。

(5) LoadRunner的结果分析器十分强大，JMeter在第三方插件的扩展下也具备了与LoadRunner相媲美的体验。
(6) 无谓好坏，更在于使用的人，对于企业来说能够快速、可靠、低成本地解决性能问题才是硬道理。
```

###### JMeter的执行顺序

```
配置元件 ---> 前置处理器 --->定时器 ---> 取样器 ---> 后置处理器 ---> 断言 ---> 监听器
```

